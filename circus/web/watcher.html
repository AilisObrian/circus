<%inherit file="base.html"/>

<script type="text/javascript" src="/media/jquery.min.js"></script>
<script type="text/javascript" src="/media/jquery.sparkline.min.js"></script>
<script type="text/javascript">
$(function() {
    $('.sparklines').sparkline();
});
</script>

% if not client:
Not connected. Go <a href="/">back</a> to connect.
% endif

% if client:
<div><a href="/">Back</a></div>

<p><strong>${name}</strong> runs <strong>${client.get_option(name, 'numprocesses')}</strong> processes.</p>

<div class="panel">
 <div class="stats">
    %for id, stat in  client.get_stats(name)[-1].items():
    <div class="stat">
        Process #${id}.
        <div>CPU : <span class='sparklines' values="${','.join([str(n) for n in client.get_series(name, id, 'cpu')])}"/></div>
        <div>Mem : <span class='sparklines' values="${','.join([str(n) for n in client.get_series(name, id, 'mem')])}"/></div>
        <div>Mem1 : <span class='sparklines' values="${','.join([str(n) for n in client.get_series(name, id, 'mem_info1')])}"/></div>
        <div>Mem2 : <span class='sparklines' values="${','.join([str(n) for n in client.get_series(name, id, 'mem_info2')])}"/></div>

        <!--
        <ul>
            %for n, v in stat.items():
            <li>${n}: ${v}</li>
            %endfor
        </ul>
        -->
     </div>
    %endfor
</div>
<div style="clear: both"/>

 <a class="action" href="/watchers/${name}/stats">Refresh stats</a>
 <a class="action" href="/watchers/${name}/process/incr">Add a process</a>
 <a class="action" href="/watchers/${name}/process/decr">Remove a process</a>
 <div style="clear: both"/>

</div>
<div class="panel">
 <p>Options :</p>
 <ul>
  %for name_, value in client.get_options(name):
   <li>${name_}: ${value}</li>
  %endfor
  </ul>
</div>

% endif

